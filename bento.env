# 50 GPU分布式部署配置文件
# 请根据实际情况修改以下配置

# ============= 网络配置 =============
# 主机内网IP（重要：请使用内网IP以获得最佳性能）
MASTER_HOST_IP=116.148.216.106

# ============= 资源配置 =============
# Redis集群配置（集中式，支持80 GPU读写）
REDIS_MEM_LIMIT=256G
REDIS_CPUS=32
REDIS_MAX_MEMORY=128g
REDIS_MAX_CLIENTS=10000
REDIS_TCP_BACKLOG=16384
REDIS_TCP_KEEPALIVE=300
REDIS_TIMEOUT=0
REDIS_SOMAXCONN=65535

# PostgreSQL配置（主机）
POSTGRES_MEM_LIMIT=32G
POSTGRES_CPUS=8
POSTGRES_SHM_SIZE=4G
POSTGRES_MAX_CONNECTIONS=1000
POSTGRES_SHARED_BUFFERS=8GB
POSTGRES_WORK_MEM=128MB
POSTGRES_MAINTENANCE_WORK_MEM=2GB
POSTGRES_EFFECTIVE_CACHE_SIZE=24GB

# MinIO配置（主机）
MINIO_MEM_LIMIT=16G
MINIO_CPUS=4

# ============= 应用配置 =============
# 数据库连接
POSTGRES_HOST=postgres
POSTGRES_DB=taskdb
POSTGRES_PORT=5432
POSTGRES_USER=worker
POSTGRES_PASSWORD=password

# Redis连接
REDIS_HOST=redis
REDIS_IMG=redis:7.2.5-alpine3.19

# MinIO连接
MINIO_HOST=minio
MINIO_IMG=minio/minio:RELEASE.2024-05-28T17-19-04Z
MINIO_ROOT_USER=admin
MINIO_ROOT_PASS=password
MINIO_BUCKET=workflow

# ============= 性能调优 =============
# 证明参数
SEGMENT_SIZE=21
RISC0_KECCAK_PO2=17
REDIS_TTL=57600
SNARK_TIMEOUT=180

# 日志配置
RUST_LOG=info


PGBOUNCER_AUTH_DB=postgres